<form class="layui-form" lay-filter="querySysLogForm">
	 <div class="layui-form-item">
    <label class="layui-form-label">日志等级</label>
    <div class="layui-inline">
      <select name="level" lay-filter="queryLevel" >
        <option value=""></option>
        <option value="0">普通日志</option>
        <option value="1">警告日志</option>
        <option value="2">错误日志</option>
      </select>
    </div>
  </div>
</form>
<table id="sysLogTable" lay-filter="sysLogTable"></table>
<script type="text/javascript">
layui.use(['table','form'],function(){
	table=layui.table;
	form=layui.form;
	
	renderSysLogTable();
	 
  	form.on("select(queryLevel)",function(data){
  		renderSysLogTable({level:data.value})
  	})
})

function renderSysLogTable(data){
	  table.render({
		where:data?data:{}
	    ,elem: '#sysLogTable'
	    ,url: '/admin/api/sysLog/page' //数据接口
	    ,page: true //开启分页
	    ,cols: [[ //表头
	      {field: 'id', title: 'ID', width:80, sort: true, fixed: 'left'}
	      ,{field: 'action', title: 'action',width:100}
	      ,{field: 'content', title: '内容'}
	      ,{field: 'data', title: '数据'}
	      ,{templet: '#tpl-level', title: '类型', width: 90, sort: true}
	      ,{field: 'ip', title: 'IP', width: 120}
	      ,{field: 'gmtCreate', title: '创建时间', width: 180, sort: true}
	     ]]
	  });
}
</script>
<script type="text/html" id="tpl-level">
	#[[ 
		{{# if(d.level==0){}}
			普通日志
		{{# }else if(d.level==1){}}
			警告日志
		{{# }else if(d.level==2){}}
			错误日志
		{{# }}}
	]]#
</script>