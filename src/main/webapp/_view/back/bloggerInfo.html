<style>

@media screen and (max-width: 1200px){
	.table-block{
		width:90%;
		margin: 0 auto;
	}
}

@media screen and (max-width: 768px){
	.layui-form-label{
		width: 50px!important;
	    padding-left:  0px!important;
	}
	.layui-input-block{
	 margin-left: 70px;
	     max-width: 230px;
	}
	   
}
.add-form{
	width:400px;
	margin: 0 auto;
	margin-left:15px;
}
.basic-config{
    width: 500px;

    margin: 1rem 0 0 0rem;}
.quote-level2{
	margin-left:25px;
}
</style> 
 <div class="layui-row ">
	<div class="layui-col-lg12 layui-col-md12">
		<blockquote class="page-title ">个人介绍</blockquote>
	</div>
</div>
<div class="layui-row" >
	<div class="layui-col-xs12 layui-col-md6 layui-col-lg6">
 			<form class="layui-form bloggerForm" action=""   onsubmit="return false">
			  <div class="layui-form-item">
			    <label class="layui-form-label">头像</label>
			    <div class="layui-input-block">
			      <input name="headImg" type="hidden" value="#(user.headImg??)">
			 	  <img alt="" class="avatar-img" src="#(user.headImg??"/_view/templates/morning/images/avatar.jpg")">
			      <button type="button" class="layui-btn" id="uploadHeadImg">
					  <i class="layui-icon">&#xe67c;</i>上传头像
				  </button>
			    </div>
			  </div>
			  <div class="layui-form-item">
			    <label class="layui-form-label">QQ</label>
			    <div class="layui-input-block">
			      <input type="hidden" name="id">
			      <input type="text" name="qq" value="#(user.qq)" placeholder="请输入QQ" autocomplete="off" class="layui-input">
			    </div>
			  </div>
			  <div class="layui-form-item">
			    <label class="layui-form-label">职业</label>
			    <div class="layui-input-block">
			      <input type="text" name="abposition"  value="#(user.abposition)"  placeholder="请输入职业" autocomplete="off" class="layui-input">
			    </div>
			  </div>

			  <div class="layui-form-item">
			    <label class="layui-form-label">所在地</label>
			    <div class="layui-input-block">
			      <input type="text" name="address" value="#(user.address)"  required  lay-verify="required" placeholder="请输入作者" autocomplete="off" class="layui-input">
			    </div>
			  </div>
			   <div class="layui-form-item layui-form-text">
			    <label class="layui-form-label">介绍</label>
			    <div class="layui-input-block">
			      <textarea name="description" placeholder="请输入介绍" class="layui-textarea">#(user.description)</textarea>
			    </div>
			  </div>
			  <div class="layui-form-item">
			    <div class="layui-input-block">
			      <button  class="layui-btn" lay-submit lay-filter="submitEdit">立即提交</button>
			    </div>
			  </div>
			</form>
	</div> 
</div>
 
 
<script>
function editInfo(data){
	$.ajax({
		url:"/admin/api/user/editInfo",
		data:data,
		type:"post",
		success:function(data){
			if(fl.isOk(data)){
				fl.alertOk({title:"修改成功！"});
			}
		}
	})
}
 
 
layui.use(['form','upload'],function(){
	form=layui.form;
	var upload = layui.upload;
	form.render();
	form.on("submit(submitEdit)",function(data){
		editInfo(data.field);
	})
	
	 //执行实例
   upload.render({
	field:"upfile",
    elem: '#uploadHeadImg' //绑定元素
    ,url: '/admin/api/upload/headimg' //上传接口
    ,done: function(res){
      	$(".avatar-img").attr("src",res.info.url);
      	$("input[name='headImg']").val(res.info.url);
    },error: function(){
      fl.alertErro("上传失败！");
    }
  });
}) 
</script>
<style>
.avatar-img{
	width:100px;
	border-radius: 50%;
}
</style>
<script type="text/javascript" src="/assets/js/from-util.js"></script>
 